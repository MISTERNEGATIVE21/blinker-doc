# 专属设备开发  

## 专属设备与独立设备  
**独立设备**是点灯提供的基础设备开发模式，开发者需先创建一个单一设备，每个设备创建后都会得到唯一的密钥。在程序中使用该密钥，可获取到设备连接信息，进而连接到点灯broker进行通信。  
**专属设备**是针对批量设备提供的开发模式，开发者需要先创建一个设备类型，每类设备有一组typeKey和authKey。在程序中使用这组密钥，通过blinker app添加设备（进行配网），设备会自动获取到设备对应的唯一密钥，再通过密钥获取到连接信息，进而连接到点灯broker进行通信。  

我们的建议：  
如果您的设备数量不多、各不相同，且只是供您或您的组织自身使用，您通常应该使用**独立设备**进行开发，每个设备您可以赋予不同的程序及设备操作界面；  
如果您的设备是标准产品、需要量产，且需要分发给其他用户使用，通常应该使用**专属设备**进行开发，每一个专属设备类型对应了一类产品，您可批量的将一个固件烧录到多个设备中，并将设备进行分发或销售。  

## 开发流程  
#### 1.创建专属设备类型  
a.开发者通过**app>开发者>专属设备>创建专属设备**，创建专属设备；  
b.创建专属设备成功后，可获取到设备的typeKey、authKey，将这两个数据写入到程序中；  
c.上传程序到设备，并通过**app>添加设备>对应设备**，为设备完成配网和注册，该设备即可测试；  

#### 2.对专属设备进行开发
- 设定设备相关信息  
可以通过 **app>开发者>专属设备>设置>编辑信息** 设定相关信息：  
1.初次使用，您可以设备页组件选择**Layouter2**，配网方式选择**SmartConfig**；  
2.设备介绍和接入引导是显示在添加设备页面的信息，支持**markdown**格式；  

- 布局设备界面  
专属设备界面提供3种选择方式：  
1.Layouter2界面编辑器拖拽生成界面，当设备页组件为Layouter2时，可以在这里拖拽生成设备界面；  
2.使用Blinker提供的模板界面；  
3.使用[Blinker Customizer](https://diandeng.tech/doc/customizer)开发独立的设备界面；  
4.企业开发者可定制独立的界面。  

- 设备开发  
见[设备端开发](#设备端开发 "设备端开发")  

- 添加设备并测试  
当信息和布局器都设定好以后，即可在**添加设备**页面看到这个设备，点击即可进行添加。；  
预先为设备烧写好程序，然后在添加设备页面点击对应设备，即可进行配置注册；  

#### 3.申请正式上线设备
设备开发测试完成后，可以申请发布该设备  

#### 4.最终用户使用  
设备正式上线后，其他用户可以在**app>添加设备**，找这个设备，点击该设备，即可进行添加操作    

## 设备端开发  
目前专属设备仅支持ESP8266/ESP32，配合Arduino SDK或freeRTOS SDK开发，详情可见：  
[Arduino支持](?file=009-专属设备开发/11-Arduino支持)  
[freeRTOS支持](?file=009-专属设备开发/12-freeRTOS支持)  
示例中type、auth即是在开发中心和管理台中查看到的设备类型和密钥。  

## 设备发布
在确保设备运行正常后，开发者可申请设备正式发布。正式发布后，所有blinker用户都可以在App中添加设备页面查看到该设备，并可进行添加设备操作。  

App端发布操作流程如下：  
a.开发者通过**app>开发者>专属设备>对应专属设备**，点击**申请设备正式上线**  
b.填写必要信息，并同意blinker专属设备开发协议  
c.等待审核通过  

### 设备发布
申请正式发布设备，需要达到以下要求：  
1.您的设备已经开发完成，能正常使用；  
2.您的设备是一个完整的产品，非个人DIY项目；  

如果满足以上两点要求，您还需要进行以下操作：  
0.通过管理台或App进行账号实名制认证  
1.通过管理台或App提交发布申请  
2.联系管理员（奈何col）寄送设备样品，如设备单价较高，我们会在测试后寄回设备；如设备不便寄送，可提供视频演示，（视频演示中应出现blinker app和设备画面）  
3.提供设备使用说明文档，设备实物照片（多角度，至少3张）  

### 上线测试
您可以联系管理员申请临时上线测试，效果和正式发布无异，只是通常我们会在30天后下线该设备。  

### 设备下线
您可以联系管理员将已上线设备进行下线处理；  
点灯团队也有权将不合格的设备进行下线处理。

